# Segues

**Сцена** - это вью контроллер с контентом или контейнер-контроллер.

**Сегвей**, или переход - он представлен классом **UIStoryboardSegue** и может делать основные операции по переключением между экранами, такие как **Present, Push, Popover**. А если этого недостаточно, можно наследоваться от этого класса и реализовать своё собственное поведение перехода.

Для того, чтобы вызвать сегвей, ему нужно задать идентификатор

Чтобы показать следующий экран нужно вызвать метод:

```swift
performSegue(withIdentifier:<String>, sender: <Any?>)
```

Первый параметр – это собственно идентификатор сегвея, который мы вписали в сториборде. Второй указывает на отправителя. По сути, это дополнительная информация, и может быть любым объектом.

Если надо передать данные во второй контроллер. Здесь отправной точкой станет метод prepare-for-segue:

```swift
override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
	    if let controller = segue.destination as? SecondViewController,
         segue.identifier == "ShowSecondScreen" { } 
}
```

Он вызывается сразу же после вызова performSegue. Первый параметр метода будет содержать идентификатор перехода и вью контроллер, который должен быть показан. Sender будет передаваться из метода performSegue

Ещё один нюанс, который вызывает много вопросов. Что, если нам нужно вернуться назад на предыдущий контроллер? И сделать это программно, то есть не по кнопке Back. В сториборде это реализуется тоже через сегвей, но весьма хитрым способом. Сначала мы должны добавить специальный IBAction во вью контроллер, в который мы хотим вернуться. Специальный он потому, что обязательно должен принимать сегвей как параметр:

```swift
@IBAction func unwindToMain(segue: UIStoryboardSegue) {}
```

Это обработчик возвратного перехода. Он ещё называется unwind. Здесь можно обработать со- бытие перехода, если нужно. Но удалять этот метод нельзя, иначе возврат перестанет работать. Теперь создадим сам возвратный сегвей. Откроем сториборд, и добавим на второй экран кнопку Close. Здесь можно обойтись даже без кода. Просто привязываем любое действие к событию Exit на сцене, и выбираем тот метод, который добавили в первом контроллере.